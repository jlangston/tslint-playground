{"version":3,"sources":["../node_modules/tslint/lib/rules/preferTemplateRule.js"],"names":["Object","defineProperty","exports","value","templateObject_1","tslib_1","__webpack_require__","tsutils_1","ts","Lint","Rule","_super","apply","this","arguments","__extends","prototype","sourceFile","isDeclarationFile","allowSingleConcat","ruleArguments","indexOf","applyWithFunction","walk","metadata","ruleName","description","optionsDescription","Utils","dedent","__makeTemplateObject","options","type","enum","optionExamples","typescriptOnly","FAILURE_STRING","FAILURE_STRING_MULTILINE","Rules","AbstractRule","ctx","forEachChild","cb","node","failure","isPlusExpression","left","right","l","isStringLike","r","containsNewline","undefined","containsAnyStringLiterals","containsOnlyStringLiterals","getError","addFailureAtNode","kind","SyntaxKind","TemplateExpression","templateSpans","some","_a","literal","text","includes","isBinaryExpression","operatorToken","PlusToken","StringLiteral","NoSubstitutionTemplateLiteral"],"mappings":"qDAiBAA,OAAAC,eAAAC,EAAA,cAA8CC,OAAA,IAC9C,IAyGAC,EAzGAC,EAAAC,EAAA,GACAC,EAAAD,EAAA,KACAE,EAAAF,EAAA,IACAG,EAAAH,EAAA,MAEAI,EAAA,SAAAC,GAEA,SAAAD,IACA,cAAAC,KAAAC,MAAAC,KAAAC,YAAAD,KAyBA,OA3BAR,EAAAU,UAAAL,EAAAC,GAIAD,EAAAM,UAAAJ,MAAA,SAAAK,GACA,GAAAA,EAAAC,kBACA,SAEA,IAAAC,GAAA,IAAAN,KAAAO,cAAAC,QAVA,uBAWA,OAAAR,KAAAS,kBAAAL,EAAAM,GAAyDJ,uBAGzDT,EAAAc,UACAC,SAAA,kBACAC,YAAA,kEACAC,mBAAAlB,EAAAmB,MAAAC,OAAAzB,MAAAC,EAAAyB,sBAAA,2PAjBA,uBAkBAC,SACAC,KAAA,SACAC,MApBA,wBAsBAC,iBAAA,MAtBA,wBAuBAF,KAAA,QACAG,gBAAA,GAGAzB,EAAA0B,eAAA,yEACA1B,EAAA2B,yBAAA,2FACA3B,EA5BA,CA6BCD,EAAA6B,MAAAC,cAED,SAAAhB,EAAAiB,GACA,IAAArB,EAAAqB,EAAAT,QAAAZ,kBACA,OAAAX,EAAAiC,aAAAD,EAAAvB,WAAA,SAAAyB,EAAAC,GACA,IAAAC,EASA,SAAAD,EAAAxB,GACA,IAAA0B,EAAAF,GACA,OAEA,IAAAG,EAAAH,EAAAG,KAAAC,EAAAJ,EAAAI,MACAC,EAAAC,EAAAH,GACAI,EAAAD,EAAAF,GACA,OAAAC,GAAAE,EAIAC,EAAAL,IAAAK,EAAAJ,GAAArC,EAAA2B,8BAAAe,EAEAJ,GAAAE,EAIAF,EAEA7B,OAAAiC,EAAA1C,EAAA0B,eAmBA,SAAAO,GACA,OAAAE,EAAAF,IAAAM,EAAAN,EAAAI,SAAAE,EAAAN,EAAAG,OAAAO,EAAAV,EAAAG,OAfAQ,CAAAR,IAAA3B,IAAA0B,EAAAC,QAAAM,EAAA1C,EAAA0B,eATAiB,EAAAP,GAAApC,EAAA0B,oBAAAgB,EAxBAG,CAAAZ,EAAAxB,GACA,QAAAiC,IAAAR,EAIA,OAAApC,EAAAiC,aAAAE,EAAAD,GAHAF,EAAAgB,iBAAAb,EAAAC,KAkCA,SAAAO,EAAAR,GACA,OAAAA,EAAAc,OAAAjD,EAAAkD,WAAAC,mBACAhB,EAAAiB,cAAAC,KAAA,SAAAC,GAEA,OADAA,EAAAC,QAAAC,KACAC,SAAA,QAIAtB,EAAAqB,KAAAC,SAAA,MAMA,SAAAZ,EAAAV,GACA,OAAAE,EAAAF,KAAAM,EAAAN,EAAAI,QAAAE,EAAAN,EAAAG,OAAAO,EAAAV,EAAAG,OAEA,SAAAD,EAAAF,GACA,OAAApC,EAAA2D,mBAAAvB,MAAAwB,cAAAV,OAAAjD,EAAAkD,WAAAU,UAEA,SAAAnB,EAAAN,GACA,OAAAA,EAAAc,MACA,KAAAjD,EAAAkD,WAAAW,cACA,KAAA7D,EAAAkD,WAAAY,8BACA,KAAA9D,EAAAkD,WAAAC,mBACA,SACA,QACA,UAnEAzD,EAAAQ","file":"static/js/37.756884d1.chunk.js","sourcesContent":["\"use strict\";\n/**\n * @license\n * Copyright 2017 Palantir Technologies, Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar tslib_1 = require(\"tslib\");\nvar tsutils_1 = require(\"tsutils\");\nvar ts = require(\"typescript\");\nvar Lint = require(\"../index\");\nvar OPTION_SINGLE_CONCAT = \"allow-single-concat\";\nvar Rule = /** @class */ (function (_super) {\n    tslib_1.__extends(Rule, _super);\n    function Rule() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    Rule.prototype.apply = function (sourceFile) {\n        if (sourceFile.isDeclarationFile) {\n            return []; // Not possible in a declaration file\n        }\n        var allowSingleConcat = this.ruleArguments.indexOf(OPTION_SINGLE_CONCAT) !== -1;\n        return this.applyWithFunction(sourceFile, walk, { allowSingleConcat: allowSingleConcat });\n    };\n    /* tslint:disable:object-literal-sort-keys */\n    Rule.metadata = {\n        ruleName: \"prefer-template\",\n        description: \"Prefer a template expression over string literal concatenation.\",\n        optionsDescription: Lint.Utils.dedent(templateObject_1 || (templateObject_1 = tslib_1.__makeTemplateObject([\"\\n            If `\", \"` is specified, then a single concatenation (`x + y`) is allowed, but not more (`x + y + z`).\"], [\"\\n            If \\\\`\", \"\\\\` is specified, then a single concatenation (\\\\`x + y\\\\`) is allowed, but not more (\\\\`x + y + z\\\\`).\"])), OPTION_SINGLE_CONCAT),\n        options: {\n            type: \"string\",\n            enum: [OPTION_SINGLE_CONCAT],\n        },\n        optionExamples: [true, [true, OPTION_SINGLE_CONCAT]],\n        type: \"style\",\n        typescriptOnly: false,\n    };\n    /* tslint:enable:object-literal-sort-keys */\n    Rule.FAILURE_STRING = \"Use a template literal instead of concatenating with a string literal.\";\n    Rule.FAILURE_STRING_MULTILINE = \"Use a multiline template literal instead of concatenating string literals with newlines.\";\n    return Rule;\n}(Lint.Rules.AbstractRule));\nexports.Rule = Rule;\nfunction walk(ctx) {\n    var allowSingleConcat = ctx.options.allowSingleConcat;\n    return ts.forEachChild(ctx.sourceFile, function cb(node) {\n        var failure = getError(node, allowSingleConcat);\n        if (failure !== undefined) {\n            ctx.addFailureAtNode(node, failure);\n        }\n        else {\n            return ts.forEachChild(node, cb);\n        }\n    });\n}\nfunction getError(node, allowSingleConcat) {\n    if (!isPlusExpression(node)) {\n        return undefined;\n    }\n    var left = node.left, right = node.right;\n    var l = isStringLike(left);\n    var r = isStringLike(right);\n    if (l && r) {\n        // They're both strings.\n        // If they're joined by a newline, recommend a template expression instead.\n        // Otherwise ignore. (\"a\" + \"b\", probably writing a long newline-less string on many lines.)\n        return containsNewline(left) || containsNewline(right) ? Rule.FAILURE_STRING_MULTILINE : undefined;\n    }\n    else if (!l && !r) {\n        // Watch out for `\"a\" + b + c`. Parsed as `(\"a\" + b) + c`.\n        return containsAnyStringLiterals(left) ? Rule.FAILURE_STRING : undefined;\n    }\n    else if (l) {\n        // `\"x\" + y`\n        return !allowSingleConcat ? Rule.FAILURE_STRING : undefined;\n    }\n    else {\n        // `? + \"b\"`\n        // If LHS consists of only string literals (as in `\"a\" + \"b\" + \"c\"`, allow it.)\n        return !containsOnlyStringLiterals(left) && (!allowSingleConcat || isPlusExpression(left)) ? Rule.FAILURE_STRING : undefined;\n    }\n}\nfunction containsNewline(node) {\n    if (node.kind === ts.SyntaxKind.TemplateExpression) {\n        return node.templateSpans.some(function (_a) {\n            var text = _a.literal.text;\n            return text.includes(\"\\n\");\n        });\n    }\n    else {\n        return node.text.includes(\"\\n\");\n    }\n}\nfunction containsOnlyStringLiterals(node) {\n    return isPlusExpression(node) && isStringLike(node.right) && (isStringLike(node.left) || containsAnyStringLiterals(node.left));\n}\nfunction containsAnyStringLiterals(node) {\n    return isPlusExpression(node) && (isStringLike(node.right) || isStringLike(node.left) || containsAnyStringLiterals(node.left));\n}\nfunction isPlusExpression(node) {\n    return tsutils_1.isBinaryExpression(node) && node.operatorToken.kind === ts.SyntaxKind.PlusToken;\n}\nfunction isStringLike(node) {\n    switch (node.kind) {\n        case ts.SyntaxKind.StringLiteral:\n        case ts.SyntaxKind.NoSubstitutionTemplateLiteral:\n        case ts.SyntaxKind.TemplateExpression:\n            return true;\n        default:\n            return false;\n    }\n}\nvar templateObject_1;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/tslint/lib/rules/preferTemplateRule.js\n// module id = 2126\n// module chunks = 37"],"sourceRoot":""}